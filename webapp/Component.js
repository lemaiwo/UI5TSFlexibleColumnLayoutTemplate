sap.ui.define(["sap/ui/core/UIComponent", "./model/models", "sap/ui/Device", "sap/f/FlexibleColumnLayoutSemanticHelper", "sap/f/library", "sap/ui/model/json/JSONModel", "./controller/ErrorHandler"], function (UIComponent, __models, sap_ui_Device, FlexibleColumnLayoutSemanticHelper, sap_f_library, JSONModel, __ErrorHandler) {
  function _interopRequireDefault(obj) {
    return obj && obj.__esModule && typeof obj.default !== "undefined" ? obj.default : obj;
  }

  const models = _interopRequireDefault(__models);

  const support = sap_ui_Device["support"];
  const LayoutType = sap_f_library["LayoutType"];

  const ErrorHandler = _interopRequireDefault(__ErrorHandler); // import device from "sap/ui/Device";


  /**
   * @namespace com.template
   */
  const Component = UIComponent.extend("com.template.Component", {
    metadata: {
      manifest: "json"
    },
    init: function _init() {
      this.errorHandler = new ErrorHandler(this);
      UIComponent.prototype.init.call(this); // set the device model

      this.setModel(models.createDeviceModel(), "device");
      this.setModel(new JSONModel(), "appView");
      this.getRouter().attachBeforeRouteMatched(event => this.onBeforeRouteMatched(event), this);
      this.getRouter().initialize();
    },
    destroy: function _destroy() {
      UIComponent.prototype.destroy.call(this);
    },
    getContentDensityClass: function _getContentDensityClass() {
      if (this._sContentDensityClass === undefined) {
        // check whether FLP has already set the content density class; do nothing in this case
        // eslint-disable-next-line
        if (document.body.classList.contains("sapUiSizeCozy") || document.body.classList.contains("sapUiSizeCompact")) {
          this._sContentDensityClass = "";
        } else if (!support.touch) {
          // apply "compact" mode if touch is not supported
          this._sContentDensityClass = "sapUiSizeCompact";
        } else {
          // "cozy" in case of touch support; default for most sap.m controls, but needed for desktop-first controls like sap.ui.table.Table
          this._sContentDensityClass = "sapUiSizeCozy";
        }
      }

      return this._sContentDensityClass;
    },
    onBeforeRouteMatched: async function _onBeforeRouteMatched(oEvent) {
      const oModel = this.getModel("appView"),
            sLayout = oEvent.getParameters().arguments.layout; // If there is no layout parameter, query for the default level 0 layout (normally OneColumn)

      if (!sLayout) {
        const helper = await this.getHelper();
        const oNextUIState = helper.getNextUIState(0);
        oModel.setProperty("/layout", oNextUIState.layout);
        return;
      }

      oModel.setProperty("/layout", sLayout);
    },
    getHelper: async function _getHelper() {
      const fcl = await this.getFcl(),
            oSettings = {
        defaultTwoColumnLayoutType: LayoutType.TwoColumnsMidExpanded,
        defaultThreeColumnLayoutType: LayoutType.ThreeColumnsMidExpanded
      };
      return FlexibleColumnLayoutSemanticHelper.getInstanceFor(fcl, oSettings);
    },
    getFcl: function _getFcl() {
      return new Promise((resolve, reject) => {
        const oFCL = this.getRootControl().byId('fcl');

        if (!oFCL) {
          this.getRootControl().attachAfterInit(oEvent => {
            resolve(oEvent.getSource().byId('fcl'));
          });
          return;
        }

        resolve(oFCL);
      });
    },
    onExit: function _onExit() {
      this.getRouter().detachBeforeRouteMatched(event => this.onBeforeRouteMatched(event), this);
    }
  });
  return Component;
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9Db21wb25lbnQudHMiXSwibmFtZXMiOlsibW9kZWxzIiwic3VwcG9ydCIsIkxheW91dFR5cGUiLCJFcnJvckhhbmRsZXIiLCJDb21wb25lbnQiLCJVSUNvbXBvbmVudCIsIm1ldGFkYXRhIiwibWFuaWZlc3QiLCJpbml0IiwiZXJyb3JIYW5kbGVyIiwic2V0TW9kZWwiLCJjcmVhdGVEZXZpY2VNb2RlbCIsIkpTT05Nb2RlbCIsImdldFJvdXRlciIsImF0dGFjaEJlZm9yZVJvdXRlTWF0Y2hlZCIsImV2ZW50Iiwib25CZWZvcmVSb3V0ZU1hdGNoZWQiLCJpbml0aWFsaXplIiwiZGVzdHJveSIsImdldENvbnRlbnREZW5zaXR5Q2xhc3MiLCJfc0NvbnRlbnREZW5zaXR5Q2xhc3MiLCJ1bmRlZmluZWQiLCJkb2N1bWVudCIsImJvZHkiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsInRvdWNoIiwib0V2ZW50Iiwib01vZGVsIiwiZ2V0TW9kZWwiLCJzTGF5b3V0IiwiZ2V0UGFyYW1ldGVycyIsImFyZ3VtZW50cyIsImxheW91dCIsImhlbHBlciIsImdldEhlbHBlciIsIm9OZXh0VUlTdGF0ZSIsImdldE5leHRVSVN0YXRlIiwic2V0UHJvcGVydHkiLCJmY2wiLCJnZXRGY2wiLCJvU2V0dGluZ3MiLCJkZWZhdWx0VHdvQ29sdW1uTGF5b3V0VHlwZSIsIlR3b0NvbHVtbnNNaWRFeHBhbmRlZCIsImRlZmF1bHRUaHJlZUNvbHVtbkxheW91dFR5cGUiLCJUaHJlZUNvbHVtbnNNaWRFeHBhbmRlZCIsIkZsZXhpYmxlQ29sdW1uTGF5b3V0U2VtYW50aWNIZWxwZXIiLCJnZXRJbnN0YW5jZUZvciIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0Iiwib0ZDTCIsImdldFJvb3RDb250cm9sIiwiYnlJZCIsImF0dGFjaEFmdGVySW5pdCIsImdldFNvdXJjZSIsIm9uRXhpdCIsImRldGFjaEJlZm9yZVJvdXRlTWF0Y2hlZCJdLCJtYXBwaW5ncyI6Ijs7Ozs7UUFD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QUFBLE9BQU8sQ0FBR3RCLE1BQU0sQ0FBQzRCLFNBQVAsRUFBRCxDQUE2QkYsSUFBN0IsQ0FBa0MsS0FBbEMsQ0FBRixDQUFQO0FBQ0EsV0FGRDtBQUdBO0FBQ0E7O0FBQ0RKLFFBQUFBLE9BQU8sQ0FBQ0UsSUFBRCxDQUFQO0FBRUEsT0FWTSxDQUFQO0FBV0EsSztBQUNNSyxJQUFBQSxNLHFCQUFhO0FBQ25CLFdBQUszQyxTQUFMLEdBQWlCNEMsd0JBQWpCLENBQTJDMUMsS0FBRCxJQUFxQixLQUFLQyxvQkFBTCxDQUEwQkQsS0FBMUIsQ0FBL0QsRUFBaUcsSUFBakc7QUFDQTs7U0F6RW1CWCxTIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFVJQ29tcG9uZW50IGZyb20gXCJzYXAvdWkvY29yZS9VSUNvbXBvbmVudFwiO1xyXG5pbXBvcnQgbW9kZWxzIGZyb20gXCIuL21vZGVsL21vZGVsc1wiO1xyXG5pbXBvcnQgeyBzdXBwb3J0IH0gZnJvbSBcInNhcC91aS9EZXZpY2VcIjtcclxuaW1wb3J0IEZsZXhpYmxlQ29sdW1uTGF5b3V0U2VtYW50aWNIZWxwZXIgZnJvbSBcInNhcC9mL0ZsZXhpYmxlQ29sdW1uTGF5b3V0U2VtYW50aWNIZWxwZXJcIjtcclxuaW1wb3J0IHsgTGF5b3V0VHlwZSB9IGZyb20gXCJzYXAvZi9saWJyYXJ5XCI7XHJcbmltcG9ydCBGbGV4aWJsZUNvbHVtbkxheW91dCBmcm9tIFwic2FwL2YvRmxleGlibGVDb2x1bW5MYXlvdXRcIjtcclxuaW1wb3J0IEpTT05Nb2RlbCBmcm9tIFwic2FwL3VpL21vZGVsL2pzb24vSlNPTk1vZGVsXCI7XHJcbmltcG9ydCBVSTVFdmVudCBmcm9tIFwic2FwL3VpL2Jhc2UvRXZlbnRcIjtcclxuaW1wb3J0IFZpZXcgZnJvbSBcInNhcC91aS9jb3JlL212Yy9WaWV3XCI7XHJcbmltcG9ydCBFcnJvckhhbmRsZXIgZnJvbSBcIi4vY29udHJvbGxlci9FcnJvckhhbmRsZXJcIjtcclxuLy8gaW1wb3J0IGRldmljZSBmcm9tIFwic2FwL3VpL0RldmljZVwiO1xyXG5cclxudHlwZSByb3V0ZVBhcmFtZXRlcnMgPSB7XHJcblx0YXJndW1lbnRzOiB7XHJcblx0XHRsYXlvdXQ6IHN0cmluZztcclxuXHR9XHJcbn07XHJcbnR5cGUgc3RhcnR1cFBhcmFtZXRlcnMgPSB7XHJcblx0YXBwVHlwZTpzdHJpbmdbXVxyXG59XHJcbnR5cGUgY29tcG9uZW50RGF0YSA9IHtcclxuXHRzdGFydHVwUGFyYW1ldGVyczogc3RhcnR1cFBhcmFtZXRlcnNcclxufTtcclxudHlwZSByb3V0ZUluZm8gPSB7XHJcblx0bmFtZTpzdHJpbmc7XHJcbn07XHJcbmV4cG9ydCB0eXBlIFVJU3RhdGUgPSB7XHJcblx0XCJsYXlvdXRcIjogc3RyaW5nO1xyXG5cdFwibWF4Q29sdW1uc0NvdW50XCI6IG51bWJlcjtcclxuXHRcImNvbHVtbnNTaXplc1wiOiB7XHJcblx0XHRcImJlZ2luQ29sdW1uXCI6IG51bWJlcjtcclxuXHRcdFwibWlkQ29sdW1uXCI6IG51bWJlcjtcclxuXHRcdFwiZW5kQ29sdW1uXCI6IG51bWJlcjtcclxuXHR9LFxyXG5cdFwiY29sdW1uc1Zpc2liaWxpdHlcIjoge1xyXG5cdFx0XCJiZWdpbkNvbHVtblwiOiBib29sZWFuO1xyXG5cdFx0XCJtaWRDb2x1bW5cIjogYm9vbGVhbjtcclxuXHRcdFwiZW5kQ29sdW1uXCI6IGJvb2xlYW47XHJcblx0fSxcclxuXHRcImlzRnVsbFNjcmVlblwiOiBib29sZWFuO1xyXG5cdFwiaXNMb2dpY2FsbHlGdWxsU2NyZWVuXCI6IGJvb2xlYW47XHJcblx0XCJhY3Rpb25CdXR0b25zSW5mb1wiOiB7XHJcblx0XHRcIm1pZENvbHVtblwiOiB7XHJcblx0XHRcdFwiZnVsbFNjcmVlblwiOiBzdHJpbmc7XHJcblx0XHRcdFwiZXhpdEZ1bGxTY3JlZW5cIjogc3RyaW5nO1xyXG5cdFx0XHRcImNsb3NlQ29sdW1uXCI6IHN0cmluZztcclxuXHRcdH0sXHJcblx0XHRcImVuZENvbHVtblwiOiB7XHJcblx0XHRcdFwiZnVsbFNjcmVlblwiOiBzdHJpbmc7XHJcblx0XHRcdFwiZXhpdEZ1bGxTY3JlZW5cIjogc3RyaW5nO1xyXG5cdFx0XHRcImNsb3NlQ29sdW1uXCI6IHN0cmluZztcclxuXHRcdH1cclxuXHR9XHJcbn1cclxuLyoqXHJcbiAqIEBuYW1lc3BhY2UgY29tLnRlbXBsYXRlXHJcbiAqL1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDb21wb25lbnQgZXh0ZW5kcyBVSUNvbXBvbmVudCB7XHJcblx0cHJpdmF0ZSBfc0NvbnRlbnREZW5zaXR5Q2xhc3M6IHN0cmluZyB8IHVuZGVmaW5lZDtcclxuXHRwcml2YXRlIGVycm9ySGFuZGxlcjogRXJyb3JIYW5kbGVyO1xyXG5cdHB1YmxpYyBzdGF0aWMgbWV0YWRhdGEgPSB7XHJcblx0XHRtYW5pZmVzdDogXCJqc29uXCJcclxuXHR9O1xyXG5cclxuXHRwdWJsaWMgaW5pdCgpOiB2b2lkIHtcclxuXHRcdHRoaXMuZXJyb3JIYW5kbGVyID0gbmV3IEVycm9ySGFuZGxlcih0aGlzKTtcclxuXHRcdFxyXG5cdFx0c3VwZXIuaW5pdCgpO1xyXG5cdFx0Ly8gc2V0IHRoZSBkZXZpY2UgbW9kZWxcclxuXHRcdHRoaXMuc2V0TW9kZWwobW9kZWxzLmNyZWF0ZURldmljZU1vZGVsKCksIFwiZGV2aWNlXCIpO1xyXG5cdFx0dGhpcy5zZXRNb2RlbChuZXcgSlNPTk1vZGVsKCksIFwiYXBwVmlld1wiKTtcclxuXHRcdHRoaXMuZ2V0Um91dGVyKCkuYXR0YWNoQmVmb3JlUm91dGVNYXRjaGVkKChldmVudDogVUk1RXZlbnQpID0+IHRoaXMub25CZWZvcmVSb3V0ZU1hdGNoZWQoZXZlbnQpLCB0aGlzKVxyXG5cdFx0dGhpcy5nZXRSb3V0ZXIoKS5pbml0aWFsaXplKCk7XHJcblx0fVxyXG5cdHB1YmxpYyBkZXN0cm95KCk6IHZvaWQge1xyXG5cdFx0c3VwZXIuZGVzdHJveSgpO1xyXG5cdH1cclxuXHRwdWJsaWMgZ2V0Q29udGVudERlbnNpdHlDbGFzcygpOiBzdHJpbmcge1xyXG5cdFx0aWYgKHRoaXMuX3NDb250ZW50RGVuc2l0eUNsYXNzID09PSB1bmRlZmluZWQpIHtcclxuXHRcdFx0Ly8gY2hlY2sgd2hldGhlciBGTFAgaGFzIGFscmVhZHkgc2V0IHRoZSBjb250ZW50IGRlbnNpdHkgY2xhc3M7IGRvIG5vdGhpbmcgaW4gdGhpcyBjYXNlXHJcblx0XHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxyXG5cdFx0XHRpZiAoZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuY29udGFpbnMoXCJzYXBVaVNpemVDb3p5XCIpIHx8IGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKFwic2FwVWlTaXplQ29tcGFjdFwiKSkge1xyXG5cdFx0XHRcdHRoaXMuX3NDb250ZW50RGVuc2l0eUNsYXNzID0gXCJcIjtcclxuXHRcdFx0fSBlbHNlIGlmICghc3VwcG9ydC50b3VjaCkgeyAvLyBhcHBseSBcImNvbXBhY3RcIiBtb2RlIGlmIHRvdWNoIGlzIG5vdCBzdXBwb3J0ZWRcclxuXHRcdFx0XHR0aGlzLl9zQ29udGVudERlbnNpdHlDbGFzcyA9IFwic2FwVWlTaXplQ29tcGFjdFwiO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdC8vIFwiY296eVwiIGluIGNhc2Ugb2YgdG91Y2ggc3VwcG9ydDsgZGVmYXVsdCBmb3IgbW9zdCBzYXAubSBjb250cm9scywgYnV0IG5lZWRlZCBmb3IgZGVza3RvcC1maXJzdCBjb250cm9scyBsaWtlIHNhcC51aS50YWJsZS5UYWJsZVxyXG5cdFx0XHRcdHRoaXMuX3NDb250ZW50RGVuc2l0eUNsYXNzID0gXCJzYXBVaVNpemVDb3p5XCI7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHJldHVybiB0aGlzLl9zQ29udGVudERlbnNpdHlDbGFzcztcclxuXHR9XHJcblx0cHJpdmF0ZSBhc3luYyBvbkJlZm9yZVJvdXRlTWF0Y2hlZChvRXZlbnQ6IFVJNUV2ZW50KSB7XHJcblxyXG5cdFx0Y29uc3Qgb01vZGVsID0gKHRoaXMuZ2V0TW9kZWwoXCJhcHBWaWV3XCIpIGFzIEpTT05Nb2RlbCksXHJcblx0XHRcdHNMYXlvdXQgPSAob0V2ZW50LmdldFBhcmFtZXRlcnMoKSBhcyByb3V0ZVBhcmFtZXRlcnMpLmFyZ3VtZW50cy5sYXlvdXQ7XHJcblxyXG5cdFx0Ly8gSWYgdGhlcmUgaXMgbm8gbGF5b3V0IHBhcmFtZXRlciwgcXVlcnkgZm9yIHRoZSBkZWZhdWx0IGxldmVsIDAgbGF5b3V0IChub3JtYWxseSBPbmVDb2x1bW4pXHJcblx0XHRpZiAoIXNMYXlvdXQpIHtcclxuXHRcdFx0Y29uc3QgaGVscGVyID0gYXdhaXQgdGhpcy5nZXRIZWxwZXIoKSA7XHJcblx0XHRcdGNvbnN0IG9OZXh0VUlTdGF0ZSA9IChoZWxwZXIuZ2V0TmV4dFVJU3RhdGUoMCkgYXMgVUlTdGF0ZSk7XHJcblx0XHRcdG9Nb2RlbC5zZXRQcm9wZXJ0eShcIi9sYXlvdXRcIiwgb05leHRVSVN0YXRlLmxheW91dCk7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHRvTW9kZWwuc2V0UHJvcGVydHkoXCIvbGF5b3V0XCIsIHNMYXlvdXQpO1xyXG5cdH1cclxuXHRwdWJsaWMgYXN5bmMgZ2V0SGVscGVyKCk6IFByb21pc2U8RmxleGlibGVDb2x1bW5MYXlvdXRTZW1hbnRpY0hlbHBlcj4ge1xyXG5cdFx0Y29uc3QgZmNsID0gYXdhaXQgdGhpcy5nZXRGY2woKSxcclxuXHRcdFx0b1NldHRpbmdzID0ge1xyXG5cdFx0XHRcdGRlZmF1bHRUd29Db2x1bW5MYXlvdXRUeXBlOiBMYXlvdXRUeXBlLlR3b0NvbHVtbnNNaWRFeHBhbmRlZCxcclxuXHRcdFx0XHRkZWZhdWx0VGhyZWVDb2x1bW5MYXlvdXRUeXBlOiBMYXlvdXRUeXBlLlRocmVlQ29sdW1uc01pZEV4cGFuZGVkXHJcblx0XHRcdH07XHJcblx0XHRyZXR1cm4gKEZsZXhpYmxlQ29sdW1uTGF5b3V0U2VtYW50aWNIZWxwZXIuZ2V0SW5zdGFuY2VGb3IoZmNsLCBvU2V0dGluZ3MpKTtcclxuXHR9XHJcblx0cHJpdmF0ZSBnZXRGY2woKTogUHJvbWlzZTxGbGV4aWJsZUNvbHVtbkxheW91dD4ge1xyXG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuXHRcdFx0Y29uc3Qgb0ZDTCA9ICgodGhpcy5nZXRSb290Q29udHJvbCgpIGFzIFZpZXcpLmJ5SWQoJ2ZjbCcpIGFzIEZsZXhpYmxlQ29sdW1uTGF5b3V0KTtcclxuXHRcdFx0aWYgKCFvRkNMKSB7XHJcblx0XHRcdFx0KHRoaXMuZ2V0Um9vdENvbnRyb2woKSBhcyBWaWV3KS5hdHRhY2hBZnRlckluaXQoKG9FdmVudDogVUk1RXZlbnQpID0+IHtcclxuXHRcdFx0XHRcdHJlc29sdmUoKChvRXZlbnQuZ2V0U291cmNlKCkgYXMgVmlldykuYnlJZCgnZmNsJykgYXMgRmxleGlibGVDb2x1bW5MYXlvdXQpKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHRcdFx0cmVzb2x2ZShvRkNMKTtcclxuXHJcblx0XHR9KTtcclxuXHR9XHJcblx0cHVibGljIG9uRXhpdCgpOnZvaWR7XHJcblx0XHR0aGlzLmdldFJvdXRlcigpLmRldGFjaEJlZm9yZVJvdXRlTWF0Y2hlZCgoZXZlbnQ6IFVJNUV2ZW50KSA9PiB0aGlzLm9uQmVmb3JlUm91dGVNYXRjaGVkKGV2ZW50KSwgdGhpcyk7XHJcblx0fVxyXG59Il19